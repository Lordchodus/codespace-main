import tkinter as tk
from tkinter import scrolledtext
import random

class RoomGeneratorGUI:
    def __init__(self, root):
        self.root = root
        self.root.title("Room Generator & Dice Roller")
        self.root.geometry("600x500")
        
        # Initialize the room list
        self.room_list = []
        
        # Create text display area with scrollbar
        self.text_area = scrolledtext.ScrolledText(
            root, 
            height=25, 
            width=70,
            bg='black',
            fg='green',
            insertbackground='green',
            font=('Courier', 10)
        )
        self.text_area.pack(pady=10)
        
        # Create input frame
        input_frame = tk.Frame(root)
        input_frame.pack(pady=5)
        
        tk.Label(input_frame, text="Command:").pack(side=tk.LEFT)
        
        # Create entry field
        self.entry = tk.Entry(input_frame, width=50, font=('Courier', 10))
        self.entry.pack(side=tk.LEFT, padx=5)
        self.entry.bind('<Return>', self.process_command)
        
        # Initial welcome message
        self.write_output("Room Generator & Dice Roller")
        self.write_output("Commands: 'room', 'dice', 'list', 'quit'")
        self.write_output("Type a command and press Enter:")
        
        # Focus on entry field
        self.entry.focus()
    
    def write_output(self, text):
        """Add text to the output area"""
        self.text_area.insert(tk.END, text + '\n')
        self.text_area.see(tk.END)  # Auto-scroll to bottom
    
    def process_command(self, event):
        """Process user input"""
        user_input = self.entry.get().lower().strip()
        
        # Clear the entry field
        self.entry.delete(0, tk.END)
        
        # Show what user typed
        self.write_output(f"> {user_input}")
        
        if user_input == 'quit':
            self.write_output("Goodbye!")
            self.root.after(1000, self.root.destroy)  # Close after 1 second
        
        elif user_input == 'room':
            gen_rooms = random.randint(1, 3)
            if gen_rooms == 1:
                room_type = "Room"
            elif gen_rooms == 2:
                room_type = "Corridor"
            else:
                room_type = "Room"
            
            self.room_list.append(room_type)
            self.write_output(f"Generated a {room_type}")
        
        elif user_input == 'dice':
            d6_roll = random.randint(1, 6)
            self.write_output(f"d6: {d6_roll}")
            
            d4_roll = random.randint(1, 4)
            self.write_output(f"d4: {d4_roll}")
            
            d20_roll = random.randint(1, 20)
            self.write_output(f"d20: {d20_roll}")
            
            d66_roll = random.randint(11, 66)
            self.write_output(f"d66: {d66_roll}")
        
        elif user_input == 'list':
            if self.room_list:
                self.write_output("\nGenerated rooms:")
                for index, room in enumerate(self.room_list, 1):
                    self.write_output(f"{index}. {room}")
            else:
                self.write_output("No rooms generated yet.")
        
        else:
            self.write_output("Unknown command. Try 'room', 'dice', 'list', or 'quit'")
        
        self.write_output("")  # Add blank line for readability

if __name__ == "__main__":
    root = tk.Tk()
    app = RoomGeneratorGUI(root)
    root.mainloop()